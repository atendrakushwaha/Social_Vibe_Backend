# Instagram Clone - System Architecture

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT LAYER                             â”‚
â”‚  (Web App / Mobile App / API Clients)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”œâ”€â”€â”€â”€ HTTP/REST API
                         â”œâ”€â”€â”€â”€ WebSocket (Socket.IO)
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NestJS APPLICATION                          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              AUTHENTICATION LAYER                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚   JWT    â”‚  â”‚ Passport â”‚  â”‚  Guards  â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  API MODULES                           â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚  Auth    â”‚  â”‚  Users   â”‚  â”‚ Profile  â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚  Posts   â”‚  â”‚ Comments â”‚  â”‚  Likes   â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚ Follows  â”‚  â”‚   Feed   â”‚  â”‚ Stories  â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚  Reels   â”‚  â”‚ Notifs   â”‚  â”‚Bookmarks â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â”‚                                                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚   â”‚
â”‚  â”‚  â”‚ Hashtags â”‚  â”‚  Search  â”‚  â”‚ Messages â”‚            â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              WEBSOCKET GATEWAY                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚  - Real-time Notifications                   â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  - Direct Messages                           â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  - Typing Indicators                         â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  - Online Status                             â”‚     â”‚   â”‚
â”‚  â”‚  â”‚  - Live Engagement                           â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MONGODB DATABASE                            â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Users   â”‚  â”‚  Posts   â”‚  â”‚ Comments â”‚  â”‚  Likes   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Follows  â”‚  â”‚ Stories  â”‚  â”‚  Reels   â”‚  â”‚  Notifs  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚Bookmarks â”‚  â”‚ Hashtags â”‚  â”‚ Activity â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Flow Diagrams

### 1. User Authentication Flow

```
Client                 API Server              Database
  â”‚                        â”‚                       â”‚
  â”œâ”€â”€POST /auth/registerâ”€â”€â–ºâ”‚                       â”‚
  â”‚                        â”œâ”€â”€Hash Passwordâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚
  â”‚                        â”œâ”€â”€Create Userâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                        â”‚â—„â”€â”€User Createdâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚â—„â”€â”€JWT Tokenâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
  â”‚                        â”‚                       â”‚
  â”œâ”€â”€POST /auth/loginâ”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                        â”œâ”€â”€Find Userâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                        â”‚â—„â”€â”€User Dataâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”œâ”€â”€Verify Password      â”‚
  â”‚                        â”œâ”€â”€Generate JWT         â”‚
  â”‚â—„â”€â”€JWT Tokenâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
```

### 2. Create Post Flow

```
Client                 API Server              Database            WebSocket
  â”‚                        â”‚                       â”‚                   â”‚
  â”œâ”€â”€POST /postsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                   â”‚
  â”‚  (with media URLs)     â”‚                       â”‚                   â”‚
  â”‚                        â”œâ”€â”€Validate JWT         â”‚                   â”‚
  â”‚                        â”œâ”€â”€Extract Hashtags     â”‚                   â”‚
  â”‚                        â”œâ”€â”€Extract Mentions     â”‚                   â”‚
  â”‚                        â”œâ”€â”€Create Postâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚                        â”‚â—„â”€â”€Post Createdâ”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
  â”‚                        â”œâ”€â”€Update User Countâ”€â”€â”€â–ºâ”‚                   â”‚
  â”‚                        â”œâ”€â”€Create Hashtagsâ”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚â—„â”€â”€Post Dataâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                   â”‚
  â”‚                        â”œâ”€â”€Send Notificationsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                        â”‚ (to mentioned users)  â”‚                   â”‚
```

### 3. Follow User Flow (Private Account)

```
Client A              API Server              Database            Client B
  â”‚                        â”‚                       â”‚                   â”‚
  â”œâ”€â”€POST /follows/Bâ”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                   â”‚
  â”‚                        â”œâ”€â”€Check if Privateâ”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚                        â”‚â—„â”€â”€isPrivate: trueâ”€â”€â”€â”€â”€â”¤                   â”‚
  â”‚                        â”œâ”€â”€Create Followâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚                        â”‚  (status: pending)    â”‚                   â”‚
  â”‚â—„â”€â”€Request Sentâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                   â”‚
  â”‚                        â”œâ”€â”€Send Notificationâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                        â”‚  (follow_request)     â”‚                   â”‚
  â”‚                        â”‚                       â”‚                   â”‚
  â”‚                        â”‚â—„â”€PATCH /requests/acceptâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”œâ”€â”€Update Statusâ”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚                        â”‚  (status: accepted)   â”‚                   â”‚
  â”‚                        â”œâ”€â”€Update Countersâ”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚â—„â”€Notificationâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                   â”‚
```

### 4. Personalized Feed Algorithm

```
Client                 Feed Service            Database
  â”‚                        â”‚                       â”‚
  â”œâ”€â”€GET /feedâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
  â”‚                        â”œâ”€â”€Get Following Listâ”€â”€â–ºâ”‚
  â”‚                        â”‚â—„â”€â”€User IDsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚
  â”‚                        â”œâ”€â”€Get Posts fromâ”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                        â”‚  Following Users      â”‚
  â”‚                        â”‚â—„â”€â”€Postsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚                        â”‚                       â”‚
  â”‚                        â”œâ”€â”€Apply Algorithm      â”‚
  â”‚                        â”‚  - Sort by engagement â”‚
  â”‚                        â”‚  - Recency score      â”‚
  â”‚                        â”‚  - User preferences   â”‚
  â”‚                        â”‚                       â”‚
  â”‚â—„â”€â”€Sorted Feedâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
```

### 5. Real-time Notification Flow

```
User A                API Server              Database            WebSocket            User B
  â”‚                        â”‚                       â”‚                   â”‚                   â”‚
  â”œâ”€â”€Like Postâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                   â”‚                   â”‚
  â”‚                        â”œâ”€â”€Create Likeâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                   â”‚
  â”‚                        â”œâ”€â”€Increment Countâ”€â”€â”€â”€â”€â–ºâ”‚                   â”‚                   â”‚
  â”‚                        â”œâ”€â”€Create Notificationâ”€â–ºâ”‚                   â”‚                   â”‚
  â”‚                        â”œâ”€â”€Emit Eventâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚
  â”‚                        â”‚                       â”‚                   â”œâ”€â”€Send to User Bâ”€â”€â–ºâ”‚
  â”‚                        â”‚                       â”‚                   â”‚  (notification)   â”‚
  â”‚â—„â”€â”€Successâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚                   â”‚                   â”‚
```

## ğŸ”„ Module Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AppModule  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â–º AuthModule â”€â”€â”€â”€â”€â”€â”€â”€â–º UsersModule
       â”‚                              â”‚
       â”œâ”€â”€â”€â–º PostsModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚         â”‚                     â”‚
       â”‚         â””â”€â”€â”€â”€â–º HashtagsModule â”‚
       â”‚                               â”‚
       â”œâ”€â”€â”€â–º CommentsModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚         â”‚                     â”‚
       â”‚         â””â”€â”€â”€â”€â–º LikesModule    â”‚
       â”‚                               â”‚
       â”œâ”€â”€â”€â–º FollowsModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                               â”‚
       â”œâ”€â”€â”€â–º FeedModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â–º PostsModule
       â”‚                               â”‚         â”‚
       â”‚                               â”‚         â””â”€â”€â”€â–º FollowsModule
       â”œâ”€â”€â”€â–º StoriesModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                               â”‚
       â”œâ”€â”€â”€â–º ReelsModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                               â”‚
       â”œâ”€â”€â”€â–º NotificationsModule â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚         â”‚                     â”‚
       â”‚         â””â”€â”€â”€â”€â–º EventsModule   â”‚
       â”‚                               â”‚
       â”œâ”€â”€â”€â–º BookmarksModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â–º PostsModule
       â”‚                               â”‚
       â”œâ”€â”€â”€â–º SearchModule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â–º UsersModule
       â”‚                               â”œâ”€â”€â”€â–º PostsModule
       â”‚                               â””â”€â”€â”€â–º HashtagsModule
       â”‚
       â””â”€â”€â”€â–º EventsModule (WebSocket)
```

## ğŸ“ˆ Scalability Considerations

### Horizontal Scaling
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NestJS    â”‚      â”‚  NestJS    â”‚      â”‚  NestJS    â”‚
â”‚  Instance  â”‚      â”‚  Instance  â”‚      â”‚  Instance  â”‚
â”‚     1      â”‚      â”‚     2      â”‚      â”‚     3      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚Load Balancerâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚   MongoDB   â”‚
                    â”‚  (Replica   â”‚
                    â”‚     Set)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Caching Layer (Future)
```
Client â”€â”€â–º Load Balancer â”€â”€â–º NestJS â”€â”€â”¬â”€â”€â–º MongoDB
                                      â”‚
                                      â””â”€â”€â–º Redis
                                           (Cache)
```

### Media Storage (Future)
```
Client â”€â”€â–º Upload â”€â”€â–º NestJS â”€â”€â–º AWS S3 / CDN
                                      â”‚
                                      â””â”€â”€â–º CloudFront
```

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 API Request                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  CORS Check    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Rate Limiter  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ JWT Validation â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Auth Guard    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Input Validationâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Controller    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Service Layer â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Database     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¾ Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Users     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â–º Posts â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â–º Comments
       â”‚                   â”‚
       â”‚                   â””â”€â”€â”€â–º Likes
       â”‚
       â”œâ”€â”€â”€â–º Stories â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Likes
       â”‚
       â”œâ”€â”€â”€â–º Reels â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Likes
       â”‚
       â”œâ”€â”€â”€â–º Follows (followers/following)
       â”‚
       â”œâ”€â”€â”€â–º Notifications (received)
       â”‚
       â”œâ”€â”€â”€â–º Bookmarks
       â”‚
       â””â”€â”€â”€â–º Activity

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hashtags    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â–º Posts
       â”œâ”€â”€â”€â–º Stories
       â””â”€â”€â”€â–º Reels
```

## ğŸ¯ Request/Response Lifecycle

```
1. Client Request
   â”‚
   â”œâ”€â–º HTTP Request / WebSocket Event
   â”‚
2. API Gateway
   â”‚
   â”œâ”€â–º Route to Controller
   â”‚
3. Middleware Pipeline
   â”‚
   â”œâ”€â–º CORS
   â”œâ”€â–º Body Parser
   â”œâ”€â–º JWT Verification
   â””â”€â–º Validation Pipes
   â”‚
4. Controller
   â”‚
   â”œâ”€â–º Extract Request Data
   â””â”€â–º Call Service Method
   â”‚
5. Service Layer
   â”‚
   â”œâ”€â–º Business Logic
   â”œâ”€â–º Database Queries
   â””â”€â–º External Services
   â”‚
6. Database Layer
   â”‚
   â”œâ”€â–º Mongoose Operations
   â””â”€â–º Return Results
   â”‚
7. Response Formation
   â”‚
   â”œâ”€â–º Transform Data
   â”œâ”€â–º Add Metadata
   â””â”€â–º Send Response
   â”‚
8. Client Receives Response
```

---

**Architecture built for:**
- âœ… Scalability
- âœ… Maintainability
- âœ… Performance
- âœ… Security
- âœ… Real-time capabilities
- âœ… Extensibility
